<!doctype html>

<html lang="en" class="light">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

  <title>ft-uic-input demo</title>

  <script src="../../es6-promise/es6-promise.auto.min.js"></script>

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

  <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
  <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">
  <link rel="import" href="../../iron-icon/iron-icon.html">
  <link rel="import" href="../../paper-button/paper-button.html">
  <link rel="import" href="../../paper-icon-button/paper-icon-button.html">
  <link rel="import" href="../../ft-uic-form/ft-uic-form.html">
  <link rel="import" href="../../ft-uic-icon-button/ft-uic-icon.html">
  <link rel="import" href="../../ft-uif-styles/themes.html">

  <link rel="import" href="../ft-uic-input.html">
  <link rel="import" href="../ft-uic-input-container.html">

  <!-- Demo helper components -->
  <link rel="import" href="customvalidation.html">

  <script src="https://unpkg.com/react@latest/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@latest/umd/react-dom.production.min.js"></script>
  <script src="./sample-component.umd.js"></script>

  <custom-style>
    <style is="custom-style" include="demo-pages-shared-styles">

      .centered {
        max-width: 800px;
      }

      #inputForValidation {
        display: inline-block;
        width: calc(100% - 75px);
      }

      paper-icon-button {
        width: 20px;
        height: 20px;
        padding: 0 4px;
      }

      .custom-error-color {
        --ft-uic-input-container-invalid-color: goldenrod !important;
        --ft-uic-input-error-color: goldenrod !important;
      }

      .custom-suffix-icon {
        position: absolute;
        top: calc(50% - .500rem);
        right: 1rem;
        color: var(--ft-icon-color);
        font-size: 1rem;
        /* Reset is needed */
        margin: 0;
        padding: 0;
      }

    </style>
  </custom-style>
</head>

<body unresolved>
  
  <div class="centered">

    <button type="button" id="themeChanger">Change theme</button>
    <script>
      var button = document.querySelector('#themeChanger');
      button.addEventListener('click', function(e) {
        let cTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
        let nTheme = cTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.classList.remove(cTheme);
        document.documentElement.classList.add(nTheme);
      });
    </script>

    <h1 class="sr-only">Inputs</h1>

    <h2>Inputs can have different types, and be disabled</h2>
    <demo-snippet>
      <template>
        <ft-uic-input auto-validate label="text input" required error-message="This input is required" placeholder="Please fill in"></ft-uic-input>
        <ft-uic-input label="password input" type="password" placeholder="Please enter password"></ft-uic-input>
        <ft-uic-input label="disabled input" disabled value="Some value"></ft-uic-input>
        <ft-uic-input label="readonly input" readonly value="Some value"></ft-uic-input>
        <ft-uic-input label="maxlength=3" maxlength="3"></ft-uic-input>
      </template>
    </demo-snippet>

    <h2>Input readonly attribute</h2>
    <demo-snippet>
      <template>

        <h5>Old (don't do)</h5>
        <ft-uic-input label="readonly input" value="Some value" readonly>
          <ft-uic-icon class="custom-suffix-icon" icon="locked" slot="suffix"></ft-uic-icon>
        </ft-uic-input>

        <h5>New</h5>
        <ft-uic-input label="readonly input" value="Some value" readonly>
        </ft-uic-input>

      </template>
    </demo-snippet>



    <h2>Inputs can have placeholder</h2>
    <demo-snippet>
      <template>
        <ft-uic-input auto-validate label="text input" required error-message="This input is required" placeholder="some placeholder"></ft-uic-input>
      </template>
    </demo-snippet>

    <h2>Inputs can validate on demand, and can have custom error messages</h2>
    <demo-snippet>
      <template>
        <ft-uic-form id="form">
          <form>
            <ft-uic-input name="inp1" force-show-error label="this input requires some text and auto validated on load" required error-message="needs some text!"></ft-uic-input>
            <ft-uic-input name="inp2" id="inputForValidation3" label="this input requires letters only (Manual Validation, Not Required)" pattern="[a-zA-Z]*" error-message="letters only!"></ft-uic-input>
            <ft-uic-input name="inp3" label="this input will only let you type letters" pattern="[a-zA-Z]*" prevent-invalid-input></ft-uic-input>
            <ft-uic-input name="inp4" auto-validate label="this input has prefilled an invalid value (only alphabets are allowed, auto-validate)" pattern="[a-zA-Z]*" value="123"></ft-uic-input>
            <ft-uic-input name="inp5" auto-validate label="this input has prefilled a valid value (only alphabets are allowed, auto-validate)" pattern="[a-zA-Z]*" value="dog"></ft-uic-input>
            <ft-uic-input name="inp6" id="inputForValidation" label="numbers only (Manual Validation, Required)" pattern="[0-9]*"
              error-message="Numbers only!" required></ft-uic-input>
            <ft-uic-input name="inp7" class="custom-error-color" id="inputForValidation2" label="Custom label and error color with class (Manual Validation, Not Required)" pattern="[0-9]*"
              error-message="Numbers only!"></ft-uic-input>
            <div>
              <paper-button class="ft-button" raised class="color-a" onclick="validate();">Manual Validate! (without form)</paper-button>
            </div>
            <div id="output"></div>
            <div>
              <input type="submit"></input>
            </div>
          </form>
        </ft-uic-form>
        <button onclick="reset()">Reset</button>
      </template>
    </demo-snippet>

   <h2>Inputs can have prefixes and suffixes</h2>
    <demo-snippet>
      <template>
        See addons.html
      </template>
    </demo-snippet>

   <h2>Inputs can have long text properties</h2>
    <demo-snippet>
      <template>
        <ft-uic-input force-show-error label="long error message (valid email). Everything very long to show what happens if these things grow really long. No CATS! Seriously, no cats. I think I'll add some more text here just because I can." type="email" value="mail(AT)armujahid.me"
          error-message="This error message is very long to demonstrate how it looks when an error message wraps and to ensure no issues arise later when someone for some reason decides to add an error message this long, even though they shouldn't because error messages should always be concise and to the point.">
        </ft-uic-input>
        <ft-uic-input  force-show-error label="long error message (numbers only)"
          value="catfish" error-message="This error message is very long to demonstrate how it looks when an error message wraps and to ensure no issues arise later when someone for some reason decides to add an error message this long, even though they shouldn't because error messages should always be concise and to the point."
          pattern="[1-9]*">
        </ft-uic-input>
      </template>
    </demo-snippet>

    <h2>Custom Validation</h2>
    <demo-snippet>
      <template>
        <custom-validation></custom-validation>
      </template>
    </demo-snippet>

   <h2>Inputs can be cleared</h2>
    <p>(value will be set to null and interaction and validity states will be reset)</p>
    <demo-snippet>
      <template>
        <!-- minlength will not work in IE. use pattern instead  https://caniuse.com/#feat=input-minlength -->
        <ft-uic-input id="clearInput" auto-validate label="Required, Minimum 4 characters uppercase or numbers"
          required pattern="[A-Z1-9]{4,}"></ft-uic-input>
        <paper-button raised class="ft-button" onclick="document.querySelector('#clearInput').clear();">
          Clear
        </paper-button>
      </template>
    </demo-snippet>

    <h2>Inputs can be forced to always show error even without user interaction</h2>
    <demo-snippet>
      <template>
        <ft-uic-input id="forceShowError" auto-validate label="Force show error" force-show-error label="this input is forced to always show an error when invalid"
          required error-message="this field is required and the error is shown even before the user interacts with this field"></ft-uic-input>
      </template>
    </demo-snippet>

    <h2>Read only changed</h2>
    <demo-snippet>
      <template>
        <ft-uic-input id="readOnly" label="this input is readonly" readonly value="test"
          required error-message="this field is required and the error is shown even before the user interacts with this field"></ft-uic-input>
        <button onclick="toggleReadonly()">Toggle Readonly</button>
      </template>
    </demo-snippet>

  </div>

  <script>
    // eslint-disable-next-line no-unused-vars
    function validate() {
      document.getElementById('inputForValidation').validate();
      document.getElementById('inputForValidation2').validate();
      document.getElementById('inputForValidation3').validate();
    }

    // eslint-disable-next-line no-unused-vars
    function clearInput() {
      document.getElementById('inputWithButton').value = '';
    }

    let form;
    let output;
    window.addEventListener('WebComponentsReady', function() {
      form = document.getElementById('form');
      output = document.getElementById('output');
      form.addEventListener('iron-form-presubmit', function(event) {
        event.preventDefault();
        const serializedForm = form.serializeForm();
        console.log(serializedForm);
        output.innerText = JSON.stringify(serializedForm);
      });
    });
    function toggleReadonly() {
      const value = document.querySelector('#readOnly').readonly;
      document.querySelector('#readOnly').readonly = !value;
    }
    function reset() {
      form.reset();
      output.innerText = '';
    }
  </script>
</body>

</html>
